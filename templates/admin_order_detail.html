{% extends "base.html" %}
{% block content %}
<h2>Order #{{ order.id }}</h2>

<div class="mb-3">
  <strong>Customer:</strong> {{ order.customer_name or 'Guest' }}<br>
  <strong>Phone:</strong> {{ order.phone }}<br>
  <strong>Address:</strong> <pre>{{ order.address }}</pre>
  <strong>Total:</strong> ₹ {{ '%.2f'|format(order.total_amount) }}<br>
  <strong>Status:</strong> {{ order.status or 'Pending' }}<br>
  <strong>Placed:</strong> {{ order.created_at.strftime('%Y-%m-%d %H:%M') if order.created_at else '-' }}
</div>

<h4>Items</h4>
<table class="table">
  <thead><tr><th>Product</th><th>Price</th><th>Qty</th><th>Subtotal</th></tr></thead>
  <tbody>
  {% for it in items %}
    <tr>
      <td>{{ it.product.name if it.product else ('Product ID ' ~ it.product_id) }}</td>
      <td>₹ {{ '%.2f'|format(it.price) }}</td>
      <td>{{ it.quantity }}</td>
      <td>₹ {{ '%.2f'|format(it.price * it.quantity) }}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>

<div class="mt-3">
  <a href="{{ url_for('admin_orders') }}" class="btn btn-secondary">Back to Orders</a>
</div>
{% endblock %}
